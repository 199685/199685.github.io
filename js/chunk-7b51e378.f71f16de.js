(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b51e378"],{"2f21":function(t,i,e){"use strict";var s=e("79e5");t.exports=function(t,i){return!!t&&s((function(){i?t.call(null,(function(){}),1):t.call(null)}))}},"2fdb":function(t,i,e){"use strict";var s=e("5ca1"),a=e("d2c8"),c="includes";s(s.P+s.F*e("5147")(c),"String",{includes:function(t){return!!~a(this,t,c).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"42e5":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(i){t.isLoading=i}}},[e("div",{staticClass:"loadingio-spinner-spin-5xz8vi7q1c2"},[e("div",{staticClass:"ldio-2zmxuno6hnw"},[e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")]),e("div",[e("div")])])])]),e("div",{staticClass:"container mt-7"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-3"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb pt-0"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:{path:"index"}}},[t._v("\n                Home\n              ")])],1),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Products")])])]),e("ProductsNavbar",{attrs:{select:t.select},on:{touchKind:t.touchKind}})],1),e("div",{staticClass:"col-lg-9 mb-3"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.sort,expression:"sort"}],staticClass:"sort text-c1 mb-3 p-1",attrs:{name:"sortProducts",id:"sortProducts"},on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var i="_value"in t?t._value:t.value;return i}));t.sort=i.target.multiple?e:e[0]}}},[e("option",{attrs:{selected:"",value:""}},[t._v("商品排序")]),e("option",{attrs:{value:"high"}},[t._v("價格由高至低")]),e("option",{attrs:{value:"low"}},[t._v("價格由低至高")])]),e("ul",{staticClass:"row p-0 pb-3"},t._l(t.filterProducts,(function(i){return e("li",{key:i.id,staticClass:"col-md-6 col-lg-4 mb-4 mb-0 list-style-none"},[e("div",{staticClass:"position-relative product"},[e("img",{staticClass:"img-size pointer",attrs:{src:i.imageUrl,alt:""}}),e("div",{staticClass:"position-absolute\n                  product-icon d-flex flex-column\n                  justify-content-center align-items-center"},[e("p",{staticClass:"pointer",class:{heartStyle:i.favourite},on:{click:function(e){return t.addFavourite(i.id)}}},[t._v("\n                    加入最愛 "),e("i",{staticClass:"far fa-heart"})]),e("p",{staticClass:"pointer",on:{click:function(e){return t.addCart(i.id)}}},[t._v("\n                    加入購物車 "),e("i",{staticClass:"fas fa-shopping-cart"})])]),e("router-link",{staticClass:"product-item p-2 d-block",attrs:{to:{name:"ProductDetail",params:{productId:i.id}}}},[e("p",{staticClass:"py-2 h7 product-name"},[t._v(t._s(i.title))]),e("div",{staticClass:"cost d-flex justify-content-between align-items-center mb-2"},[e("p",{staticClass:"text-line-through h9 m-0"},[t._v("\n                      原價"+t._s(t._f("currency")(i.origin_price))+"\n                    ")]),e("div",{staticClass:"d-flex"},[e("p",{staticClass:"text-success h9 badges-boder-success mr-1 mb-0"},[t._v("可超商取")]),e("p",{staticClass:"text-danger h9 badges-boder-danger mb-0"},[t._v("不甜退差價")])])]),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("p",{staticClass:"h5 text-c4"},[t._v("特價"+t._s(t._f("currency")(i.price)))]),e("a",{staticClass:"h9 m-0",attrs:{href:"#"}},[t._v("查看更多\n                      "),e("i",{staticClass:"far fa-hand-point-up"})])])])],1)])})),0)])])]),e("Carticon",{attrs:{carts:t.cartsNumber}})],1)},a=[],c=(e("ac6a"),e("6762"),e("2fdb"),e("55dd"),e("6c8e")),r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("ul",{staticClass:"fruit-item pl-0 text-center"},[e("li",{staticClass:"list-style-none"},[e("a",{staticClass:"fruit p-3 d-block h6 m-0",class:{active:"all"===t.select},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.touchKind("all")}}},[t._v("全部")])]),e("li",{staticClass:"list-style-none"},[e("a",{staticClass:"fruit p-3 d-block h6 m-0",class:{active:"spring"===t.select},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.touchKind("spring")}}},[t._v("春季水果")])]),e("li",{staticClass:"list-style-none"},[e("a",{staticClass:"fruit p-3 d-block h6 m-0",class:{active:"summer"===t.select},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.touchKind("summer")}}},[t._v("夏季水果")])]),e("li",{staticClass:"list-style-none"},[e("a",{staticClass:"fruit p-3 d-block h6 m-0",class:{active:"autumn"===t.select},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.touchKind("autumn")}}},[t._v("秋季水果")])]),e("li",{staticClass:"list-style-none"},[e("a",{staticClass:"fruit p-3 d-block h6 m-0",class:{active:"winter"===t.select},attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),t.touchKind("winter")}}},[t._v("冬季水果")])])])])},n=[],o={props:["select"],data:function(){return{}},components:{},methods:{touchKind:function(t){var i=t;this.$emit("touchKind",i)}},created:function(){},mounted:function(){}},l=o,u=e("2877"),d=Object(u["a"])(l,r,n,!1,null,"075e2e04",null),p=d.exports,f={data:function(){return{colsepopup:!1,cartsNumber:0,products:[],hotproducts:[],isLoading:!1,cartProductID:[],cartID:[],quantityValue:1,favourite:[],select:"all",sort:""}},components:{Carticon:c["a"],ProductsNavbar:p},computed:{filterProducts:function(){var t=JSON.parse(JSON.stringify(this.products)),i=this;return"high"===this.sort?t.sort((function(t,i){return i.price-t.price})):"low"===this.sort&&t.sort((function(t,i){return t.price-i.price})),"all"===this.select?t:t.filter((function(t){return t.season.includes(i.select)}))}},methods:{getCarts:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart"),e=this;this.$http.get(i).then((function(i){t.cartsNumber=i.data.data.carts.length,e.cartProductID.splice(0),e.cartID.splice(0),i.data.data.carts.forEach((function(t){var i={id:t.id,qty:t.qty};e.cartID.push(i),e.cartProductID.push(t.product_id)})),e.isLoading=!1}))},getProducts:function(){var t=this,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/products/all");this.isLoading=!0,this.$http.get(i).then((function(i){t.products=i.data.products,t.getFavourite()}))},getFavourite:function(){this.favourite=JSON.parse(localStorage.getItem("Favourite"))||[];var t=this;this.products.forEach((function(i){t.$set(i,"favourite",!1);var e=t.favourite.includes(i.id);e&&t.$set(i,"favourite",!0)}))},addFavourite:function(t){var i=this.favourite.indexOf(t);i>-1?(this.favourite.splice(i,1),this.alertDisplay("已移除我的最愛","warning")):(this.favourite.push(t),this.alertDisplay("已加入我的最愛","info")),localStorage.setItem("Favourite",JSON.stringify(this.favourite)),this.getFavourite()},addCart:function(t){var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart"),e=parseInt(this.quantityValue,10),s=this,a=this.cartProductID.indexOf(t);s.isLoading=!0,a>=0&&(e+=parseInt(s.cartID[a].qty,10));var c={product_id:t,qty:e};this.$http.post(i,{data:c}).then((function(){a>=0?s.removeProduct(s.cartID[a].id):s.getCarts(),s.quantityValue=1,s.alertDisplay("已加入購屋車","info")}))},removeProduct:function(t){var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart/").concat(t),e=this;this.$http.delete(i).then((function(){e.getCarts()}))},touchKind:function(t){var i=t;this.select=i},alertDisplay:function(t,i){var e=t,s=i;this.$dlg.toast(e,{messageType:s,closeTime:3,position:"topCenter",language:"en"})}},created:function(){this.getCarts(),this.getProducts()},mounted:function(){}},h=f,v=Object(u["a"])(h,s,a,!1,null,"47e50b66",null);i["default"]=v.exports},5147:function(t,i,e){var s=e("2b4c")("match");t.exports=function(t){var i=/./;try{"/./"[t](i)}catch(e){try{return i[s]=!1,!"/./"[t](i)}catch(a){}}return!0}},"55dd":function(t,i,e){"use strict";var s=e("5ca1"),a=e("d8e8"),c=e("4bf8"),r=e("79e5"),n=[].sort,o=[1,2,3];s(s.P+s.F*(r((function(){o.sort(void 0)}))||!r((function(){o.sort(null)}))||!e("2f21")(n)),"Array",{sort:function(t){return void 0===t?n.call(c(this)):n.call(c(this),a(t))}})},6762:function(t,i,e){"use strict";var s=e("5ca1"),a=e("c366")(!0);s(s.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")("includes")},"6c8e":function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{staticClass:"cart-icon position-fixed"},[e("p",{staticClass:"pointer h1 mb-4"},[e("i",{staticClass:"fas fa-arrow-circle-up hide",on:{click:function(i){return t.Top()}}})]),e("p",{staticClass:"pointer h5"},[e("router-link",{attrs:{to:{path:"/shoppingcart"}}},[e("i",{staticClass:"fas fa-shopping-cart text-c1 pl-1 position-relative shopping-cart"},[e("span",{staticClass:"position-absolute h8 circle text-light"},[t._v("\n            "+t._s(t.carts)+"\n          ")])])])],1)])])},a=[],c={data:function(){return{changebar:!1}},props:["carts"],components:{},methods:{Top:function(){window.scrollTo({top:0,left:0,behavior:"smooth"})},addhide:function(){var t=document.querySelector(".cart-icon"),i=document.querySelector(".fa-arrow-circle-up");window.pageYOffset>t.offsetTop/2?i.classList.remove("hide"):i.classList.add("hide")}},created:function(){},mounted:function(){window.addEventListener("scroll",this.addhide)},beforeDestroy:function(){window.removeEventListener("scroll",this.addhide)}},r=c,n=e("2877"),o=Object(n["a"])(r,s,a,!1,null,"edc8be46",null);i["a"]=o.exports},aae3:function(t,i,e){var s=e("d3f4"),a=e("2d95"),c=e("2b4c")("match");t.exports=function(t){var i;return s(t)&&(void 0!==(i=t[c])?!!i:"RegExp"==a(t))}},d2c8:function(t,i,e){var s=e("aae3"),a=e("be13");t.exports=function(t,i,e){if(s(i))throw TypeError("String#"+e+" doesn't accept regex!");return String(a(t))}}}]);
//# sourceMappingURL=chunk-7b51e378.f71f16de.js.map