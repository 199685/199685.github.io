(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e95b6"],{"8cd9":function(t,a,s){"use strict";s.r(a);var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}},[s("div",{staticClass:"loadingio-spinner-spin-5xz8vi7q1c2"},[s("div",{staticClass:"ldio-2zmxuno6hnw"},[s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")]),s("div",[s("div")])])])]),s("div",{staticClass:"container-100 container my-4"},[s("div",{staticClass:"row bg-product justify-content-center container-75"},[s("nav",{staticClass:"col-12",attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:{path:"index"}}},[t._v("\n              Home\n            ")])],1),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Shopping Cart")])])]),s("div",{staticClass:"col text-center pb-5",class:{"d-none":!t.zerocarts}},[s("p",{staticClass:"h4 mb-5 text-c1"},[t._v("目前購物車還沒有任何商品")]),s("div",{staticClass:"text-center"},[s("router-link",{attrs:{to:{path:"products"}}},[s("button",{staticClass:"btn new-btn new-btn-favourite"},[t._v("採購去~~")])])],1)]),s("div",{staticClass:"col-md-10 mb-5 container-25",class:{"d-none":t.zerocarts}},[s("div",{staticClass:"accordion",attrs:{id:"accordionExample"}}),s("div",{staticClass:"card pb-1"},[s("div",{staticClass:"card-header d-sm-flex justify-content-between py-1",attrs:{id:"headingOne"}},[t._m(0),s("h2",{staticClass:"mb-0 pl-3 pl-sm-0 d-flex align-items-center"},[s("p",{staticClass:"d-inline-block h7 mb-0 pr-3"},[t._v("應付金額")]),t._v("\n              "+t._s(t._f("currency")(t.total[0]||0))+"\n            ")])]),s("div",{staticClass:"collapse show",attrs:{id:"collapseOne","aria-labelledby":"headingOne","data-parent":"#accordionExample"}},[s("div",{staticClass:"shopping-table"},[s("table",{staticClass:"table"},[t._m(1),t._l(t.carts.carts,(function(a,c){return s("tr",{key:a.id},[s("td",{staticClass:"text-center",attrs:{width:"100"}},[s("i",{staticClass:"far fa-trash-alt pointer p-3",on:{click:function(s){return t.removeProduct(a,c)}}})]),s("td",{staticClass:"table-img"},[s("img",{staticClass:"img-fluid",attrs:{src:a.product.imageUrl,alt:""}})]),s("td",[t._v(t._s(a.product.title))]),s("td",[s("div",{staticClass:"d-flex"},[s("button",{staticClass:"count",on:{click:function(s){t.quantity("minus",a),t.addChangeProducts(a)}}},[s("i",{staticClass:"fas fa-minus"})]),s("input",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"product.qty"}],staticClass:"qtyInput__1dbgq ",attrs:{type:"number",min:"1",max:"200",name:"quantity"},domProps:{value:a.qty},on:{change:function(s){t.inputQuanproduct(a),t.addChangeProducts(a)},input:function(s){s.target.composing||t.$set(a,"qty",s.target.value)}}}),s("button",{staticClass:"count",on:{click:function(s){t.quantity("plus",a),t.addChangeProducts(a)}}},[s("i",{staticClass:"fas fa-plus"})])])]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.product.price)))]),s("td",{staticClass:"text-right"},[t._v("\n                    "+t._s(t._f("currency")(a.product.price*a.qty))+"\n                  ")])])})),t._m(2),s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("合計")]),s("th",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.total[0]||0)))])])],2)])])]),s("div",{staticClass:"text-right mt-2"},[s("button",{staticClass:"btn new-btn new-btn-checkout",on:{click:function(a){return t.nextpage()}}},[t._v("結帳去")])])]),s("div",{staticClass:"col-12"},[s("ProductSwiper",{staticClass:"mb-3",attrs:{products:t.products}})],1)])]),s("Carticon",{attrs:{carts:t.cartsNumber}})],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h2",{staticClass:"mb-0"},[s("button",{staticClass:"btn btn-link btn-block text-left",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}},[t._v("\n                顯示購物車細節"),s("i",{staticClass:"fas fa-angle-down ml-1 text-c1"})])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("th",{staticClass:"text-center",attrs:{scope:"col",colspan:"3"}},[t._v("商品名稱")]),s("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[t._v("數量")]),s("th",{attrs:{scope:"col",width:"200"}},[t._v("單價")]),s("th",{attrs:{scope:"col",width:"200"}},[t._v("小計")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("tr",[s("th",{staticClass:"text-right",attrs:{colspan:"5"}},[t._v("運費")]),s("th",{staticClass:"text-right"},[t._v("$0")])])}],e=(s("ac6a"),s("6c8e")),n=s("5677"),r={data:function(){return{isLoading:!1,cartsNumber:0,carts:[],total:[],changeProductsID:[],zerocarts:!0,products:[]}},components:{Carticon:e["a"],ProductSwiper:n["a"]},computed:{},methods:{getCarts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart"),s=this;s.isLoading=!0,this.$http.get(a).then((function(a){t.cartsNumber=a.data.data.carts.length,s.cartsNumber>0&&(s.zerocarts=!1),s.carts=a.data.data,s.total=[a.data.data.total],s.getProducts()}))},quantity:function(t,a){var s=a;s.qty=parseInt(s.qty,10),"plus"===t?(s.qty+=1,this.total[0]+=parseInt(s.product.price,10)):s.qty>1&&(s.qty-=1,this.total[0]-=parseInt(s.product.price,10)),s.total=parseInt(s.product.price,10)*s.qty},inputQuanproduct:function(t){var a=t;(a.qty<=0||!a.qty)&&(a.qty=1);var s=this,c=this.total[0]-parseInt(a.total,10)+parseInt(a.product.price,10)*a.qty;s.$set(s.total,0,c),a.total=parseInt(a.product.price,10)*a.qty},removeProduct:function(t,a){var s=this,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart/").concat(t.id),i=this;i.isLoading=!0,this.$http.delete(c).then((function(){i.total[0]-=t.qty*t.product.price,s.removeChangeProducts(t.product_id,a),i.isLoading=!1,i.alertDisplay("".concat(t.product.title,"已移除購物車"),"error")})),i.cartsNumber-=1,0===i.cartsNumber&&(i.zerocarts=!0)},addChangeProducts:function(t){var a=this.changeProductsID.map((function(t){return t.product_id})),s=a.indexOf(t.product_id);if(s<0){var c={id:t.id,qty:t.qty,product_id:t.product_id};this.changeProductsID.push(c)}else this.changeProductsID[s].qty=t.qty},removeChangeProducts:function(t,a){var s=this.changeProductsID.map((function(t){return t.product_id})),c=s.indexOf(t);this.changeProductsID.splice(c,1),this.carts.carts.splice(a,1)},nextpage:function(){var t=this,a=this;a.isLoading=!0,this.changeProductsID.forEach((function(a){var s="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart"),c="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/cart/").concat(a.id),i={product_id:a.product_id,qty:a.qty};t.$http.post(s,{data:i}).then((function(){})),t.$http.delete(c).then((function(){}))})),a.$router.push("/checkout1")},alertDisplay:function(t,a){var s=t,c=a;this.$dlg.toast(s,{messageType:c,closeTime:2,position:"topCenter",language:"en"})},getProducts:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("chi","/products/all"),s=this;this.$http.get(a).then((function(a){t.products=a.data.products,s.isLoading=!1}))}},created:function(){this.getCarts()},mounted:function(){}},o=r,d=s("2877"),l=Object(d["a"])(o,c,i,!1,null,"22b6c570",null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0e95b6.21df32c7.js.map